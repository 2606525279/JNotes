# SQL基础

# 数据类型

字符型：

* char(n) ：固定长度，自动填充至n 个字符长度。最多255字符

* varchar(n)：可变长度。

**数据类型	占的字节数	有符号范围**

tinyint(m)	1个字节	范围(-128~127)

smallint(m)	2个字节	范围(-32768~32767)

mediumint(m)	3个字节	范围(-8388608~8388607)

int(m)	4个字节	范围(-2147483648~2147483647)

bigint(m)	8个字节	范围(+-9.22*10的18次方)



**注意**

* 取值范围如果加了unsigned，则最大值翻倍，如tinyint unsigned的取值范围为(0~256)

* int (n) ：n 表示 zerofill  状态下，显示的最少字符长度，与存储空间大小无关（int 都在4个字节长度）

![1562926867684](assets/1562926867684.png)

![1562926888780](assets/1562926888780.png)

# 连接查询

mysql 连接查询分：

- **INNER JOIN（内连接,或等值连接）**
- **LEFT JOIN（左连接）**
- **RIGHT JOIN（右连接）**

举例说明：

student、class 表如下：

```sql
SELECT * FROM student;
+-----+-------+
| sid | sname |
+-----+-------+
|   1 | aaa   |
|   2 | bbb   |
|   3 | ccc   |
|   4 | ddd   |
+-----+-------+

SELECT * FROM class;
+-----+------+-------+
| cid | sid  | cname |
+-----+------+-------+
|   1 |    1 | 语文  |
|   2 |    1 | 数学  |
|   3 |    2 | 英语  |
|   4 |    2 | 数学  |
|   5 |    9 | 美术  |
+-----+------+-------+
```

## INNER JOIN

```sql
SELECT * FROM student s inner JOIN class c ON c.sid = s.sid;
+-----+-------+-----+------+-------+
| sid | sname | cid | sid  | cname |
+-----+-------+-----+------+-------+
|   1 | aaa   |   1 |    1 | 语文  |
|   1 | aaa   |   2 |    1 | 数学  |
|   2 | bbb   |   3 |    2 | 英语  |
|   2 | bbb   |   4 |    2 | 数学  |
+-----+-------+-----+------+-------+
```

**从上数据可以看出：并不包含student表中sid=3、4的数据（即 sname 为 ccc、ddd 的数据），也不包含class 表中的 sid =9 的数据**

从笛卡尔积的角度：就是从笛卡尔积中**挑出ON子句条件成立的记录**

**即：查出两个表中所有满足 `ON` 条件的数据，即`两个表的交集`**



## LEFT JOIN

```sql
mysql> SELECT * FROM student s LEFT  JOIN class c ON c.sid = s.sid;
+-----+-------+------+------+-------+
| sid | sname | cid  | sid  | cname |
+-----+-------+------+------+-------+
|   1 | aaa   |    1 |    1 | 语文  |
|   1 | aaa   |    2 |    1 | 数学  |
|   2 | bbb   |    3 |    2 | 英语  |
|   2 | bbb   |    4 |    2 | 数学  |
|   3 | ccc   | NULL | NULL | NULL  |
|   4 | ddd   | NULL | NULL | NULL  |
+-----+-------+------+------+-------+
```

从笛卡尔积的角度讲，就是先从笛卡尔积中挑出ON子句条件成立的记录，然后加上左表中剩余的记录（见最后三条）。

**即：查出两个表中所有满足 `ON` 条件的数据，外加`左表`不满足`ON`的数据**



## RIGHT JOIN

```sql
mysql> SELECT * FROM student s RIGHT  JOIN class c ON c.sid = s.sid;
+------+-------+-----+------+-------+
| sid  | sname | cid | sid  | cname |
+------+-------+-----+------+-------+
|    1 | aaa   |   1 |    1 | 语文  |
|    1 | aaa   |   2 |    1 | 数学  |
|    2 | bbb   |   3 |    2 | 英语  |
|    2 | bbb   |   4 |    2 | 数学  |
| NULL | NULL  |   5 |    9 | 美术  |
+------+-------+-----+------+-------+
```

同理右连接RIGHT JOIN就是求两个表的交集外加右表剩下的数据。再次从笛卡尔积的角度描述，右连接就是从笛卡尔积中挑出ON子句条件成立的记录，然后加上右表中剩余的记录（见最后一条）。

**即：查出所有满足 `ON` 条件的数据，外加`右表`不满足`ON`的数据**