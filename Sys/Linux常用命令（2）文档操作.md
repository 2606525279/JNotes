



# 文档操作

常用：cat、less、more、tail、vi/vim

## cat命令

查看文件内容的命令

> 语法格式：cat [参数] [文件]
>
> 常用参数：
>
> -n 或 --number：由 1 开始对所有输出的行数编号。
>
> -b 或 --number-nonblank：和 -n 相似，只不过对于空白行不编号。
>
> -s 或 --squeeze-blank：当遇到有连续两行以上的空白行，就代换为一行的空白行。
>
> -v 或 --show-nonprinting：使用 ^ 和 M- 符号，除了 LFD 和 TAB 之外。
>
> -E 或 --show-ends : 在每行结束处显示 $。
>
> -T 或 --show-tabs: 将 TAB 字符显示为 ^I。
>
> -A, --show-all：等价于 -vET。
>
> -e：等价于"-vE"选项；
>
> -t：等价于"-vT"选项；

常用实例

```shell
查看文件的内容
cat filename.txt
查看文件的内容，并显示行数编号
cat -n filename.txt
查看文件的内容，并添加行数编号后输出到另外一个文件中
cat -n linuxcool.log > linuxprobe.log 
清空 /etc/test.txt 文档内容：
cat /dev/null > /etc/test.txt
```

命令内部操作：

* Ctrl+S键，停止滚屏；
* Ctrl+Q键可以恢复滚屏；
* Ctrl+C（中断）键则可以终止该命令的执行。





## less命令

浏览文字档案的内容，使用 less 可以随意浏览文件，而 more 仅能向前移动，却不能向后移动，而且 less 在查看之前不会加载整个文件

> 语法格式：less [参数] [文件]
>
> 常用参数：
>
> -b <缓冲区大小> 设置缓冲区的大小
>
> -e 当文件显示结束后，自动离开
>
> -f 强迫打开特殊文件，例如外围设备代号、目录和二进制文件
>
> -g 只标志最后搜索的关键词
>
> -i 忽略搜索时的大小写
>
> -m 显示类似more命令的百分比
>
> -N 显示每行的行号
>
> -o <文件名> 将less 输出的内容在指定文件中保存起来
>
> -Q 不使用警告音
>
> -s 显示连续空行为一行
>
> -S 行过长时间将超出部分舍弃
>
> -x <数字> 将"tab"键显示为规定的数字空格

常用实例：

```shell
#查看文件
less log2013.log
```

命令内部操作：

* /  字符串：向下搜索"字符串"的功能
* ?  字符串：向上搜索"字符串"的功能
* n：重复前一个搜索（与 / 或 ? 有关）
* N：反向重复前一个搜索（与 / 或 ? 有关）

* b： 向后翻一页
* d： 向后翻半页
* h： 显示帮助界面
* Q： 退出less 命令
* u： 向前滚动半页
* y： 向前滚动一行
* 空格键： 滚动一页
* 回车键： 滚动一行



## more命令

more 命令类似 cat ，不过会以一页一页的形式显示，更方便使用者逐页阅读，而最基本的指令就是按空白键（space）就往下一页显示，按 b 键就会往回（back）一页显示，而且还有搜寻字串的功能（与 vi 相似），使用中的说明文件，请按 h；

> 语法格式：more [参数] [文件]
>
> 常用参数：
>
> -num 一次显示的行数
>
> -d 提示使用者，在画面下方显示 [Press space to continue, 'q' to quit.] ，如果使用者按错键，则会显示 [Press 'h' for instructions.] 而不是 '哔' 声
>
> -l 取消遇见特殊字元 ^L（送纸字元）时会暂停的功能
>
> -f 计算行数时，以实际上的行数，而非自动换行过后的行数（有些单行字数太长的会被扩展为两行或两行以上）
>
> -p 不以卷动的方式显示每一页，而是先清除萤幕后再显示内容
>
> -c 跟 -p 相似，不同的是先显示内容再清除其他旧资料
>
> -s 当遇到有连续两行以上的空白行，就代换为一行的空白行
>
> -u 不显示下引号 （根据环境变数 TERM 指定的 terminal 而有所不同）
>
> +/pattern 在每个文档显示前搜寻该字串（pattern），然后从该字串之后开始显示
>
> +num 从第 num 行开始显示
>
> fileNames 欲显示内容的文档，可为复数个数

常用参数：

```shell
显示文件file的内容，显示之前先清屏，附已显示的百分比
more -dc file 
显示文件file的内容，每10行显示一次，而且在显示之前先清屏：
more -c -10 file
从第 20 行开始显示 file 之文档内容 ：
more +20 file 
```

命令内部操作：

* Space键：显示文本的下一屏内容
* Enter键：向下n行，需要定义，默认为1行
* 斜线符\：接着输入一个模式，可以在文本中寻找下一个相匹配的模式
* H键：显示帮助屏
* B键：显示上一屏内容
* Q键：退出more命令
* Ctrl+F、空格键：向下滚动一屏
* Ctrl+B：返回上一屏
* =： 输出当前的行号
* ：f：输出文件名和当前的行号
* V：调用vi编辑器
* !：调用Shell，并执行命令



## tail命令

tail用于显示文件尾部的内容，默认在屏幕上显示指定文件的末尾10行

> 语法格式：tail [参数] [文件]
>
> 常用参数：
>
> -f 循环读取
>
> -q 不显示处理信息
>
> -v 显示详细的处理信息
>
> -c<数目> 显示的字节数
>
> -n<行数> 显示文件的尾部 n 行内容
>
> --pid=PID 与-f合用,表示在进程ID,PID死掉之后结束
>
> -q, --quiet, --silent 从不输出给出文件名的首部
>
> -s, --sleep-interval=S 与-f合用,表示在每次反复的间隔休眠S秒

常用实例

```shells
#显示文件file的最后10行
tail file
显示文件file的内容，从第20行至文件末尾
tail +20 file 
显示文件file的最后10个字符
 tail -c 10 file 
 一直变化的文件总是显示后10行
 tail -f 10 file
```



## vi/vim

基本上 vi/vim 共分为三种模式，分别是**命令模式**，**输入模式**和**底线命令模式**

* 命令模式：用户刚刚启动 vi/vim，便进入了命令模式。
* 输入模式：在命令模式下按下 i （或者Insert键）就进入了输入模式。
* 底线命令模式：在命令模式下按下 :（英文冒号）就进入了底线命令模式。

命令模式：

/word： 在文件中查找内容为word的字符串（向下查找）

?word： 在文件中查找内容为word的字符串（向上查找）

输入模式下操作：

* **字符按键以及Shift组合**，输入字符
* **ENTER**，回车键，换行
* **BACK SPACE**，退格键，删除光标前一个字符
* **DEL**，删除键，删除光标后一个字符
* **方向键**，在文本中移动光标
* **HOME**/**END**，移动光标到行首/行尾
* **Page Up**/**Page Down**，上/下翻页
* **Insert**，切换光标为输入/替换模式，光标将变成竖线/下划线
* **ESC**，退出输入模式，切换到命令模式

底线命令模式操作：

* :q 退出程序
* :w 保存文件
* :q! 强制退出
* :w! 强制保存文件